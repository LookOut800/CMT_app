"use strict";function homeController(){}function loginController(a,b){var c=this;c.login=function(d){a.login(d).then(function(){c.credentials={},b.path("/")})}}function navbarController(a,b){var c=this;c.isLoggedin=function(){return a.isAuthenticated()},c.logout=function(){a.logout().then(function(){b.path("/")})}}function postsController(a){var b=this;b.posts=a.posts}function footerController(){}angular.module("CmtApp",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch","MainController","MainDirective"]).run(["$rootScope","$http","$window","$location","AuthFactory","PostsFactory",function(a,b,c,d,e,f){d.path("/home"),f.getPosts()}]),angular.module("CmtApp").config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/home.html",controller:"HomeController"}).when("/login",{templateUrl:"views/login.html"}).when("/posts",{templateUrl:"views/posts.html",controller:"PostsController",controllerAs:"postsController"}).when("/media",{templateUrl:"views/media.html",controller:"MediaController",controllerAs:"mediaController"}).when("/cv",{templateUrl:"views/cv.html"}).otherwise({redirectTo:"/"})}]),angular.module("CmtApp").constant("ServerUrl","http://localhost:3000"),angular.module("CmtApp").factory("AuthFactory",["$http","$window","ServerUrl",function(a,b,c){var d=function(b){return console.log(b),a.post(c+"/login",b).success(function(a){h(a)})},e=function(){return console.log(),a.get(c+"/logout").success(function(){b.localStorage.removeItem("cmt-user")})},f=function(){var a=JSON.parse(b.localStorage.getItem("cmt-user"));return a?!!a.token:!1},g=function(){},h=function(c){b.localStorage.setItem("cmt-user",JSON.stringify(c)),a.defaults.headers.common.Authorization="Token token="+c.token};return{login:d,logout:e,isAuthenticated:f,clearStorage:g}}]),angular.module("CmtApp").factory("PostsFactory",["$http","$window","ServerUrl",function(a,b,c){function d(a){angular.copy(a,h)}function e(d){{var e={post:d},f=JSON.parse(b.localStorage.getItem("cmt-user"));({headers:{AUTHORZATION:"Token token="+f.token}})}return d.id?a.put(c+"/posts/"+d.id,e):a.post(c+"/posts",e).then(function(a){g.push(a.data)})}function f(b){return a["delete"](c+"/posts/"+b.id).success(function(){for(var a=0;a<g.length;a++)if(g[a].id===b.id){g.splice(a,1);break}})}var g=[],h={},i=function(){return a.get(c+"/posts").success(function(a){angular.copy(a,g),console.log(a)}).error(function(a,b,c){console.log("Youre doing it wrong:",a,b,c)})};return{posts:g,setPost:d,getPosts:i,upsertPost:e,deletePost:f}}]),angular.module("MainController",[]),angular.module("MainController").controller("HomeController",homeController),homeController.$inject=[],angular.module("MainController").controller("LoginController",loginController),loginController.$inject=["AuthFactory","$location"],angular.module("MainController").controller("NavbarController",navbarController),navbarController.$inject=["AuthFactory","$location"],angular.module("MainController").controller("PostsController",postsController),postsController.$inject=["PostsFactory"],angular.module("MainController").controller("FooterController",footerController),footerController.$inject=["AuthFactory","$location"],angular.module("MainDirective",[]),angular.module("MainDirective").directive("loginForm",[function(){return{restrict:"E",templateUrl:"views/login-form.html",controller:"LoginController",controllerAs:"loginController",bindToController:!0,scope:{credentials:"="}}}]),angular.module("MainDirective").directive("cmtNavbar",[function(){return{restict:"E",templateUrl:"views/navbar.html",controller:"NavbarController",controllerAs:"navbarController",bindToController:!0,scope:{},link:function(){}}}]),angular.module("MainDirective").directive("cmtFooter",[function(){return{restict:"E",templateUrl:"views/footer.html",controller:"FooterController",controllerAs:"footerController",bindToController:!0,scope:{},link:function(){}}}]);
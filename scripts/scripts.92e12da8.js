"use strict";function homeController(){}function navbarController(a,b,c,d){var e=this;e.isLoggedin=function(){return a.isAuthenticated()},e.logout=function(){a.logout().then(function(){d.path("/")})}}function cVController(a,b,c,d){d.gotoBottom=function(){console.log("scrolling"),c.hash("bottom"),b()}}function headerController(){}function postsController(a){var b=this;b.posts=a.posts}function footerController(){}angular.module("CmtApp",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch","MainController","MainDirective"]).run(["$rootScope","$http","$window","$location","$anchorScroll","AuthFactory","PostsFactory",function(a,b,c,d,e){e.yOffset=50}]),angular.module("CmtApp").config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/open.html"}).when("/home",{templateUrl:"views/home.html",controller:"HomeController"}).when("/login",{templateUrl:"views/login.html"}).when("/posts",{templateUrl:"views/posts.html",controller:"PostsController",controllerAs:"postsController"}).when("/media",{templateUrl:"views/media.html",controller:"MediaController",controllerAs:"mediaController"}).when("/cv",{templateUrl:"views/cv.html",controller:"CVController"}).otherwise({redirectTo:"/"})}]),angular.module("CmtApp").constant("ServerUrl","http://cmtapi.herokuapp.com"),angular.module("CmtApp").factory("AuthFactory",["$http","$window","ServerUrl",function(a,b,c){var d=function(b){return console.log(b),a.post(c+"/login",b).success(function(a){h(a)})},e=function(){return console.log(),a.get(c+"/logout").success(function(){b.localStorage.removeItem("cmt-user")})},f=function(){var a=JSON.parse(b.localStorage.getItem("cmt-user"));return a?!!a.token:!1},g=function(){},h=function(c){b.localStorage.setItem("cmt-user",JSON.stringify(c)),a.defaults.headers.common.Authorization="Token token="+c.token};return{login:d,logout:e,isAuthenticated:f,clearStorage:g}}]),angular.module("CmtApp").factory("PostsFactory",["$http","$window","ServerUrl",function(a,b,c){function d(a){angular.copy(a,h)}function e(d){{var e={post:d},f=JSON.parse(b.localStorage.getItem("cmt-user"));({headers:{AUTHORZATION:"Token token="+f.token}})}return d.id?a.put(c+"/posts/"+d.id,e):a.post(c+"/posts",e).then(function(a){g.push(a.data)})}function f(b){return a["delete"](c+"/posts/"+b.id).success(function(){for(var a=0;a<g.length;a++)if(g[a].id===b.id){g.splice(a,1);break}})}var g=[],h={},i=function(){return a.get(c+"/posts").success(function(a){angular.copy(a,g),console.log(a)}).error(function(a,b,c){console.log("Youre doing it wrong:",a,b,c)})};return{posts:g,setPost:d,getPosts:i,upsertPost:e,deletePost:f}}]),angular.module("MainController",[]),angular.module("MainController").controller("HomeController",homeController),homeController.$inject=[],angular.module("MainController").controller("LoginController",["$scope","$http","$location","AuthFactory","trace",function(a,b,c,d,e){a.createUser=!1,a.message="",a.login=function(a){d.login(a).success(function(a){c.path("/"),e(a)})},a.newUser=function(){a.createUser=!0},a.upsertUser=function(b){d.postNewUser(b).success(function(b){c.path("/login"),a.message="Congratulations, you successfully created an account. Please login to continue.",e(b)})}}]),angular.module("MainController").controller("NavbarController",navbarController),navbarController.$inject=["AuthFactory","$anchorScroll","$location","$scope"],angular.module("MainController").controller("CVController",cVController),cVController.$inject=["AuthFactory","$anchorScroll","$location","$scope"],angular.module("MainController").controller("HeaderController",headerController),headerController.$inject=["AuthFactory","$location"],angular.module("MainController").controller("PostsController",postsController),postsController.$inject=["PostsFactory"],angular.module("MainController").controller("FooterController",footerController),footerController.$inject=["AuthFactory","$location"],angular.module("MainDirective",[]),angular.module("MainDirective").directive("loginForm",[function(){return{restrict:"E",templateUrl:"views/login-form.html",controller:"LoginController",controllerAs:"loginController",bindToController:!0,scope:{credentials:"="}}}]),angular.module("MainDirective").directive("cmtNavbar",[function(){return{restict:"E",templateUrl:"views/navbar.html",controller:"NavbarController",controllerAs:"navbarController",bindToController:!0,scope:{},link:function(){}}}]),angular.module("MainDirective").directive("cmtHeader",[function(){return{restict:"E",templateUrl:"views/header.html",controller:"HeaderController",controllerAs:"headerController",bindToController:!0,scope:{},link:function(){}}}]),angular.module("MainDirective").directive("cmtFooter",[function(){return{restict:"E",templateUrl:"views/footer.html",controller:"FooterController",controllerAs:"footerController",bindToController:!0,scope:{},link:function(){}}}]);